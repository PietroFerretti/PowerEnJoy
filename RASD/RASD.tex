\documentclass[english]{article}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{babel}
\usepackage[unicode=true,pdfusetitle,
 bookmarks=true,bookmarksnumbered=false,bookmarksopen=false,
 breaklinks=true,pdfborder={0 0 1},backref=false,colorlinks=false]
 {hyperref}
\usepackage{tabularx}
\usepackage{graphicx}
\graphicspath{{images/}{Mockups/}}
\usepackage{svg}
\usepackage{float}
\usepackage{titling}

\usepackage{listings}
\usepackage{alloy}
\usepackage{color}
\definecolor{alloy-keyword}{rgb}{0.23, 0.23, 0.7}
\definecolor{alloy-comment}{rgb}{0.18, 0.64, 0.18}
\definecolor{alloy-string}{rgb}{0.71, 0.18, 0.71}
\lstset{
	language=alloy,
	numbers=left,
	numberstyle=\tiny,
	stepnumber=2,
	tabsize=4,
	keywordstyle=\color{alloy-keyword}\bfseries,
	commentstyle=\color{alloy-comment},
	stringstyle=\color{alloy-string},
	basicstyle=\small\fontfamily{pcr}\selectfont,
}
\renewcommand{\arraystretch}{1.4}

\pretitle{%
	\begin{center}
		\LARGE
		\includegraphics[width=250pt]{../other/Logo_blu.png}\\[\bigskipamount]~\\[\bigskipamount]
	}
\posttitle{\end{center}}

\begin{document}

\title{Politecnico di Milano\\
 A.A. 2016–2017 \\
Software Engineering 2: “PowerEnJoy” \\
\emph{Requirements Analysis and Specification Document}}

\author{Pietro Ferretti, Nicole Gervasoni, Danilo Labanca}
\date{November 13, 2016}
\maketitle

\newpage

\tableofcontents{}

\newpage

\section{Introduction}

\subsection{Purpose}

\paragraph{}
The purpose of this document is to provide a detailed description and specification of a digital management system for PowerEnJoy, an electric car sharing service. This document will
illustrate functional and non-functional requirements of the software to-be, outlining costraints, showing potential user interfaces for the software, and explaining the domain assumptions made. Additionally, at the end of the document we will present an Alloy model to further specificate the world and environment our system will have to manage.

\paragraph{}
This document is first and foremost a description of the project for all interested stakeholders and a reference for future development, but can also be used as a basis for legally binding agreements.


\subsection{Scope}

\paragraph{}
The aim of this project is to specify in detail a new digital management software for PowerEnJoy, a car-sharing service that employs electric cars only.

\paragraph{}
Users must be able to register to PowerEnJoy providing their personal data, driving license and payment information.
After registering, users should be able to look for available cars near them or to a specific location. If they find a car that matches their needs, they can reserve the car up to one hour before using it. After approaching a reserved car users should have a way to unlock the car and enter it.
While using a car users are charged for a given amount of money per minute; a display on the car will inform the user of the amount of money they will have to pay at the end of the ride.
The system stops charging the user after the car is parked in a safe area.
Furthermore the system incentivizes virtuous behaviours by offering several discounts if certain conditions are met (e.g. charging a car at a power grid station).

\paragraph{}
To accomplish these goals we need to bridge the gap between the world (cars and passengers) and our system (servers, databases, etc.).
The users will be able to access the system functionalities through a web and a mobile application, and a dedicated touchscreen installed in every car.
A central system will manage the cars and the reservations, and will communicate with the cars through the Internet. The system will follow the cars’ movements thanks to the GPS tracker installed in every car. Furthermore all cars will be equipped with a great variety of sensors to check the cars’ status at any time.

\newpage
\subsection{Definitions, Acronyms, Abbreviations}

\subsubsection{Definitions}

\begin{itemize}
\item{\textit{Guest}: a person that is not registered to the system.}
\item{\textit{User}: a person that is registered to the system. Users can log in to the system with their email or username and their password. Their first name, last name, date of birth, driving license ID are stored in the database.}
\item{\textit{Safe area}: a location where the user can park and leave the car. Users can end their ride and park temporarily only in these locations. The set of safe areas are predefined by the system.}
\item{\textit{Power grid station}: a place where cars can be parked and plugged in. While a car is plugged in a power grid station its battery will be recharged. Power grid stations are by definition safe areas.}
\item{\textit{Available car}: a car that is currently not being used by any user, and has not been reserved either. Available cars are in good conditions (not dirty nor damaged) and don’t have dead batteries.}
\item{\textit{Reservation}:
	\begin{itemize}
		\item{the operation of making a car reserved for a user, i.e. giving permission to unlock and use the car only for that user, forbidding reservations by other users.}
		\item{the time period between the moment a reservation is requested and the moment the user unlocks the car, or the reservation is canceled.}
	\end{itemize}
}
\item{\textit{Ride}: the time period from the moment a reserved car is unlocked to the moment the user notifies that he wants to stop using the car and closes all the doors. A ride doesn’t stop when a car is temporarily parked, but continues until the user chooses to leave the car definitely.}
\item{\textit{Possession}: users that have reserved and unlocked a car are said to have possession of the car. While a user has possession of a car they are the only person that can drive it, lock or unlock it, and no other person can take possession of it until the user frees it. Users lose possession of a car when their ride ends.}
\item{\textit{Temporary parking}: the act of parking a car in a safe area and, after notifying the system, locking it and leaving it for a finite amount of time. The user that does this retains the right to use the car and can unlock it later to use it again.}
\item{\textit{Bill}: a record of the money owed by the user at the end of a ride.}
\item{\textit{Outstanding bill}: a bill that hasn’t been paid yet. }
\item{\textit{Suspended user}: a user that cannot reserve or use cars. Usually users are suspended because they have outstanding bills.}
\item{\textit{Payment method}: a way to transfer money from the user to the system. Our system will only accept credit cards and online accounts like Paypal.}
\item{\textit{Payment API}: an interface to carry out money transactions, offered by the external provider associated to the payment method used (e.g. a bank).}
\item{\textit{CAN bus}: a vehicle bus standard designed to allow micro controllers and devices to communicate with each other.}
\end{itemize}

\subsubsection{Acronyms}
\begin{itemize}
\item{\textbf{RASD}: Requirements Analysis and Specification Document}
\item{\textbf{DB}: Database}
\item{\textbf{CVV}: Card Verification Value}
\item{\textbf{DOB}: Date of birth}
\item{\textbf{PGS}: Power Grid Station}
\item{\textbf{GPS}: Global Positioning System}
\item{\textbf{CAN bus}: Controller Area Network bus}
\end{itemize}

\subsubsection{Abbreviations}
\begin{itemize}
\item{\textbf{[Gx]}: Goal}
\item{\textbf{[RE.x]}: Functional Requirement}
\item{\textbf{[UC.x]}: Use Case}
\end{itemize}

\subsection{Reference Documents}

\begin{itemize}
	\item{ISO/IEC/IEEE Std. 29148:2011, “Systems and software engineering -- Life cycle processes -- Requirements engineering”}
	\item{Specification document: “Assignments AA 2016-2017.pdf”}
\end{itemize}

\newpage{}

\subsection{Document Overview}
This document is structured as follows:
\begin{itemize}
\item{\textbf{Section 1 - Introduction:} it is a presentation of the document and the product; it contains the information needed to understand the whole document.}
\item{\textbf{Section 2 - Overall Description:} gives general information about the software product with more focus about constraints and assumptions.}
\item{\textbf{Section 3 - Specific Requirements:} it contains the product requirements list, use cases and associated UML diagrams; this section will delve deeper into the software functionalities. In addition, it includes some application mockups in order to produce a clearer vision on how the final product will look like.}
\item{\textbf{Section 4 - Appendix:} it contains an Alloy model of the application domain, a list of all tools used to draw up this document and the hours of work each collaborator put into the creation of this document.}
\end{itemize}

\newpage{}

\section{Overall Description}

\subsection{Product Perspective}

\subsubsection{Integration with external systems}

Since there are no existing modules our system will need to integrate, PowerEnjoy is mainly a standalone system.
The PowerEnjoy software will use APIs in order to accomplish few specific goals such as  driving licence verification and card payment processing, more details about it can be found in section \ref{apis}.
The PowerEnjoy system is not planned to offer any APIs to external systems.

The whole system, software and databases, will be stored on the central servers. These will communicate with the car software which will control the car application given the sensors' feedbacks.
Every request or data query from the application (both web and mobile version) will be sent to and elaborated by the servers.

\subsubsection{Domain model}

Here are presented both the state chart and the class diagram models in order to show a more formal and rigorous description of how the system will work and will be developed.

class diagram
%\begin{figure}[H]
%	\centering
%	\makebox[\textwidth][c]{
%		\includegraphics[width=450pt]{CLASSDIAGRAMHERE.png}
%	}
%	\caption{Class diagram}
%	\label{classdiagram}
%\end{figure}

\begin{figure}[H]
	\centering
	\makebox[\textwidth][c]{
		\includegraphics[width=450pt]{statechart.png}
	}
	\caption{State Chart for cars}
	\label{statechart}
\end{figure}

\subsection{Product Functions}\label{goals}

The PowerEnJoy application will offer many different functionalities; specifically, the goals we want to accomplish are the following:
\begin{description}
	\item[{[G1]}]{Guests must be able to register as users by choosing a username and providing their personal data, driving license and payment information. They will receive a password at the email address they specified.}
	\item[{[G2]}]{Users must be able to login with the username/email inserted and the password received on registration.}
	\item[{[G3a]}]{Users must be able to find the location and battery charge of all the available cars within a certain distance from their current location.}
	\item[{[G3b]}]{Users must be able to find the location and battery charge of all available cars around a specified location.}
	\item[{[G4]}]{Users must be able to reserve a car for up to one hour before they pick it up. If they don't take the car before the time expires they are charged a fixed fee of 1 EUR.}
	\item[{[G5]}]{Users must be able to cancel a reservation if they decide to not actually use the car.}
	\item[{[G6]}]{A user that reaches a car reserved by them must have a way to tell the system they’re nearby, so that the system unlocks the car and the user may enter.}
	\item[{[G7]}]{The system must charge the user who reserved the car from the moment the engine is ignited after unlocking it. The user is charged for a given	amount of money per minute.}
	\item[{[G8]}]{The system must allow the user to see the amount they’re being charged through a screen on the car.}
	\item[{[G9]}]{The system must stop charging the user as soon as the car is parked in a safe area and the user exits the car notifying the system that they ended their ride.}
	\item[{[G10]}]{Users must be able to leave a car without losing the reservation by informing the system that they’re only temporarily parking; in this case the system continues on charging the user. The user should be able to end the ride without coming back to the car if they so choose.}
	\item[{[G11]}]{The system must lock the car automatically after the user exits the car.}
	\item[{[G12]}]{The system must provide a money saving option to the user, proposing a suitable power grid station near the user’s final destination. The user will get a discount if they park the car there and plug it in the power grid.}
	\item[{[G13]}]{The stations proposed by the system with the money saving option must be chosen in a way that ensures a uniform distribution of cars in the city.}
	\item[{[G14]}]{The system must apply a discount of 10\% on the last ride if the user took at least two other passengers onto the car.}
	\item[{[G15]}]{The system must apply a discount of 20\% on the last ride if the car is left with more than 50\% of remaining battery charge.}
	\item[{[G16]}]{The system must apply a discount of 30\% on the last ride if the car is left at special parking areas where they can be recharged, and the user takes care of plugging the car into the power grid.}
	\item[{[G17]}]{The system must charge 30\% more if the car is left at more than 3 km from the nearest power grid station or with less than 20\% remaining battery charge.}
	\item[{[G18]}]{Users with outstanding bills cannot have access to the cars and reservations until the bills are paid.}
	\item[{[G19]}]{Users with outstanding bills should have a way to pay them.}
	\item[{[G20]}]{Available cars should actually be available to the user and in good conditions (i.e. not dirty, damaged, and/or with low battery)}
\end{description}

\subsection{User Characteristics}

Users will use our application mainly to borrow cars and drive from one place to another to reach their destination. Considering that the users will have to drive cars, the typical user will at the very least have a driving license and be able to drive; users will also be necessarily of age.

Nonetheless, our users' level of skill and technological expertise can vary widely, from the young 20-something digital native with a modern smartphone, to the old couple that has some trouble with mobile applications and technology.

This means that our apps/interfaces must be as user-friendly as possible to allow a wide audience of people to easily use our applications and system.

\newpage
\subsection{Constraints}\label{constraints}

\subsubsection{Regulatory policies}

\paragraph{}
All the users are responsible for their behavior, from the insertion of truthful data to the respect of traffic laws.

\paragraph{}
The system must obtain the agreement from the user to acquire, process and store data.\newline
The system must grant to the user the chance to delete the account and so remove from the DB each data concerning the user.\newline
All the sensitive data are stored and transmitted to third parts society in accordance to the law.\newline

\subsubsection{Hardware limitations}

The system has to run under the following worst-case conditions:

\begin{itemize}
  \item{a mobile Internet connection (for example a 3G or 4G connection) that guarantee 1Mb/s.}
  \item{50 MB of space}
\end{itemize}

\subsubsection{Criticality of the application}
The system is not used in life-critical applications.

\subsubsection{Parallel operations}
The system must be able to respond multiple and simultaneous requests from users.

\subsubsection{Safety and security considerations}
\paragraph{}
All the knowledge regarding user's credentials, reservations, rides and bills must be kept private and accessible only to the user.

\paragraph{}
The position of a car could be accessible also both to employee and the user that reserved the car.


\newpage
\subsection{Assumptions and Dependencies}

\paragraph{Car hardware dependencies}
To provide all the functionalities specified in this document, every car must have:
\begin{itemize}
	\item{a reliable GPS tracker;}
	\item{a mobile Internet connection (for example a 3G or 4G connection);}
	\item{sensors to collect data from the engine and the battery;}
	\item{an electronic switch to lock and unlock the doors;}
	\item{a weight sensor on each seat;}
	\item{a touchscreen to offer a dedicated interface to users;}
	\item{a GPS navigator to show the position of the power grid stations to the user and guide him;}
	\item{an internal system to control these components and communicate with the central system;}
	\item{a unique QR code printed on the outside of the car.}
\end{itemize}

\paragraph{Web application dependencies}
The web application needs an Internet connection to work, for example to connect to the database and find available cars.

\paragraph{Mobile application dependencies}
The mobile application will need at least an Internet connection to receive data from and communicate with the central system. Access to the device’s location is not mandatory, but is needed to provide the “find available cars near me” functionality.
The mobile device will need a QR scanner to unlock the cars.

\paragraph{Power grid stations}
Power grid stations must have a sensor on each plug to know if it's free or in use, and an Internet connection to communicate this information to the system.





\paragraph{Perfect signal}
The car’s data connection is always working and stable. \\
The car’s GPS signal is always available and precise.

\paragraph{Predefined data}
The system has a predefined list of all the safe areas and their locations, list that can be changed by the people in control of the system. Likewise, the system has a predefined list of all the power grid stations, their locations and the number of plugs present in each station.

\paragraph{No idle users}
After unlocking a car users turn on the engine shortly after (i.e. the user doesn't stand in the car idly for long periods of time). We'd prefer if this happened rarely, because users aren't charged until the engine is ignited.
We suppose that users want to get to their destination as soon as possible.

\paragraph{Users leave the car after parking}
When a user ends a ride or parks temporarily, we assume that the users and all the passengers have already exited the car when the last door is closed and the lock timeout expires. \\
This keeps the user or the passengers from getting stuck in the car when the system locks it automatically.

\paragraph{No cheating on the weight sensors}
When the weight measured by a seat weight sensor exceeds a certain threshold, we suppose that a person is present on that seat (and not an object).

\paragraph{Cars are recharged}
An external agency is entrusted with the task of recharging cars with low or dead batteries. The task of recharging cars doesn't involve our system, except for when a car is flagged as available again.

\paragraph{Users report problems}
Users always report dirty or damaged cars they find. Moreover, we trust users to never submit false reports.

\paragraph{Problems are fixed}
If a car is reported for a problem, an external agency is entrusted with the tasks of cleaning, repairing or fixing the car's problem. After the problem is fixed the agency marks the car as available in the system manually.

\paragraph{Theft is handled independently}
There is an office in charge of handling the cases when a car is flagged or reported as stolen.
We suppose they're autonomous and don't need to interact with the system.

\paragraph{Cars aren't abandoned in bad spots}
We suppose users are reliable and never let the cars run out of battery before parking in a safe area.

\newpage

\section{Specific Requirements}

\subsection{External Interface Requirements}

\subsubsection{User Interfaces}

\paragraph{}
Our software will provide 3 main user interfaces: a mobile application, a web application and an application for the car's display.
Through these interfaces the users must be able to access all the functionalities listed in section \ref{goals}.

\paragraph{}
The design of:
\begin{itemize}
  \item{web application must follow W3C standard about HTML5 and CSS.}
  \item{iOS application must follow iOS Human Interface Guidelines described by Apple.}
  \item{Android application must follow Android Interface Guidelines about Material Design.}
\end{itemize}

\paragraph{}
The interfaces must be user-friendly and easy to use.
Every element's function must be clear, so that users can intuitively navigate the application without any confusion.

\paragraph{}
To avoid clunkiness and make the application easy to use, every functionality must be reachable in a maximum of 3 clicks and/or taps from any page.



%%%%%%%%%%%%%%%
% Le immagini su latex tendono a disporsi dove c'è spazio, sistemeremo la posizione alla fine
%%%%%%%%%%%%%%%
 \paragraph{}

\begin{itemize}
	\item{\textbf{Web Application UI}}
\end{itemize}
something about the web user interface
responsive, usable on every type of screen
a mobile version for people who don't have the mobile application and just visit the web page


\begin{figure}[H]
	\centering
	\makebox[\textwidth][c]{
		\includegraphics[width=\textwidth]{web/Signup.png}
	}
	\caption{The web Sign Up form}
\end{figure}
\begin{figure}[H]
	\centering
	\makebox[\textwidth][c]{
		\includegraphics[width=\textwidth]{web/Login.png}
	}
	\caption{The web Login page}
\end{figure}
\begin{figure}[H]
	\centering
	\makebox[\textwidth][c]{
		\includegraphics[width=\textwidth]{web/HomepageLogged.png}
	}
	\caption{The dashboard, after logging in}
\end{figure}

\newpage
\begin{itemize}
	\item{\textbf{Mobile application UI}}
\end{itemize}

\begin{figure}[H]
	\centering
	\begin{minipage}{.55\textwidth}
		\centering
		\includegraphics[width=100pt]{mobile/localization.png}
		\caption{Map showing available cars}
	\end{minipage}%
	\begin{minipage}{.5\textwidth}
		\centering
		\includegraphics[width=100pt]{mobile/MenuSX.png}
		\caption{The mobile application menu}
	\end{minipage}
\end{figure}

\begin{figure}[H]
	\centering
	\begin{minipage}{.55\textwidth}
	\centering
	\includegraphics[width=100pt]{mobile/FreeReservation.png}
	\caption{A car has been reserved}
	\end{minipage}%
	\begin{minipage}{.5\textwidth}
	\centering
	\includegraphics[width=100pt]{mobile/Unlock.png}
	\caption{When the user is close to the car an unlock button is available}
	\end{minipage}
\end{figure}

%\begin{figure}[H]
%	\centering
%	\includegraphics[width=100pt]{mobile/FreeReservationEnded.png}
%	\caption{*reservation expired*}
%\end{figure}

\newpage
\begin{itemize}
	\item{\textbf{Car's display application UI}}
\end{itemize}

something about the car's display user interface
emphasis on the navigator, to let the user follow
the amount of money to pay is visible
the battery charge must be visible
scavkjsfa

\begin{figure}[H]
	\centering
	\makebox[\textwidth][c]{
		\includegraphics[width=\textwidth]{car/car.png}
	}
	\caption{The car's display while a user is driving}
\end{figure}


\subsubsection{Hardware Interfaces}

\paragraph{}
The car's system must interface with the the car's CANBUS to collect information about the engine,
the battery level and all the sensors installed on the car (GPS, weight sensors).

\subsubsection{Software Interfaces (API)}\label{apis}

The system requires:
\paragraph{}
\begin{itemize}
  \item{\textit{Payment API}:
      \begin{itemize}
        \item{\textit{VISA circuit API}:
          \href{https://developer.visa.com}{<VISA Developer Center>}}
        \item{\textit{MasterCard circuit API}:
          \href{https://developer.mastercard.com/apis}{<MasterCard Developer Center>}}
        \item{\textit{PayPal API}ì
          \href{https://developer.paypal.com/docs/api/overview/}{<PayPal API Overview>}}
      \end{itemize}}
    \item{\textit{Driving License Validation API}:
      \begin{itemize}
        \item{\textit{Eucaris API}:
          \href{https://www.eucaris.net}{<Eucaris>}}
      \end{itemize}}
\end{itemize}

\paragraph{}
The mobile application must interface with the operating system:
\begin{itemize}
  \item{\textit{iOS}}
  \item{\textit{Android}}
  \item{\textit{Windows Phone}}
\end{itemize}

\subsubsection{Communication Interfaces}

All the communications between web application and system server or mobile application must be HTTPS request/response.

\newpage

\subsection{Functional Requirements}

\subsubsection{Requirements}


\begin{description}

\item[{[G1]}]{Guests must be able to register as a user by choosing a username and providing their personal data, driving license and payment information. They will receive a password at the email address they specified.

\begin{itemize}
\item{[RE.1.1] The system must offer an interface (e.g. a form on a web page or on the mobile application) where the user can enter and submit the data needed for registration:
a username of their choice, their personal data (first name, last name, date of birth), a driving license ID or a photo of one, and a payment method.}
\item{[RE.1.2] The system must verify that the data provided by a user on registration is valid.}
\item{[RE.1.3] When a user registers the system must randomly generate a safe password and associate it to the user’s account.}
\item{[RE.1.4] After a user is registered the system must send the generated password to the user via email at the email address they provided.}
\end{itemize}
}

\item[{[G2]}]{Users must be able to log in with the username/email they submitted on registration and the password they received.
\begin{itemize}
	\item{[RE.2.1] The system must offer an interface (e.g. a form on a web page or on the mobile application) where the user can enter and submit their credentials (username/email and password) to log in.}
	\item{[RE.2.2] The system must compare the credentials submitted by the user with the ones saved in the database.}
	\item{[RE.2.3] If the credentials submitted on login are valid, the system authenticates the user and allows them to use the available functionalities.}
	\item{[RE.2.4] If the credentials submitted on login are not valid, the system denies access to the user and notifies them of the error.}
\end{itemize}
}

\item[{[G3a]}]{Users must be able to find the location and battery charge of all the available cars within a certain distance from their current location.
\begin{itemize}
	\item{[RE.3a.1] The system must offer an interface where the user can activate the option to look for nearby available cars if the user’s location is available (e.g. thanks to a GPS receiver).}
	\item{[RE.3a.2] When the user activates the option to find nearby available cars, the system must get the user's location and look in the database for every available car near them.}
	\item{[RE.3a.3] The system must show the results of the search for nearby available cars on a suitable interface (e.g. a map).}
\end{itemize}
}

\item[{[G3b]}]{Users must be able to find the location and battery charge of all available cars around a specified location.
\begin{itemize}
	\item{[RE.3b.1] The system must offer an interface where the user can submit an address and search for available cars near that location.}
	\item{[RE.3b.2] When the user starts a search for available cars near a certain address, the system must look in the database for every available car close to the address provided by the user.}
	\item{[RE.3b.3] The system must show the results of the search for available cars on a suitable interface (e.g. a map).}
\end{itemize}
}

\item[{[G4]}]{Users must be able to reserve a car for up to one hour before they pick it up.
\begin{itemize}
	\item{[RE.4.1] The system must offer an interface that shows to the user the cars available for reservation (e.g. the search results specified in RE.3a.3) and allow the user to select a car.}
	\item{[RE.4.2] When a user selects a car for reservation the system must mark the car as reserved by that user.}
	\item{[RE.4.3] If the car has not been unlocked for an hour after reservation, the system must mark the car as available and charge the user a fixed amount (1 EUR).}
\end{itemize}
}

\item[{[G5]}]{Users must be able to cancel a reservation if they decide to not actually use the car.}

\item[{[G6]}]{A user that reaches a car reserved by them must have a way to tell the system they’re nearby, so that the system unlocks the car and the user may enter.
\begin{itemize}
	\item{[RE.6.1] The system must offer an interface to unlock the car, with their position or the car's QR code.}
	\item{[RE.6.2] If the user is within a certain distance from the car, their device location is available and they choose from the interface to unlock the car with the position, the system must unlock the car.}
	\item{[RE.6.3] If the user chooses from the interface to unlock the car with the QR code and the user takes a clear picture of the QR code of the right car, the system must unlock the car.}
\end{itemize}
}

\item[{[G7]}]{The system must charge the user who reserved the car from the moment the engine is ignited after unlocking it. The user is charged for a given	amount of money per minute.
\begin{itemize}
	\item{[RE.7.1] The system must keep track until the end of the reservation of the amount the user has to pay.}
	\item{[RE.7.2] The system starts to charge the user the moment the reserved car’s engine is ignited after unlocking the car.}
	\item{[RE.7.3] The system increases the total amount charged by a given amount per minute.}
\end{itemize}
}

\item[{[G8]}]{The system must allow the user to see the amount they’re being charged through a screen on the car.
\begin{itemize}
	\item{[RE.7.1] The system must keep track until the end of the reservation of the amount the user has to pay.}
	\item{[RE.8.1] After the system has started keeping track of the amount that the user has to pay, the system must show it in a clear way on the car screen while the car is in use and the reservation hasn’t ended.}
\end{itemize}
}

\item[{[G9]}]{The system must stop charging the user as soon as the car is parked in a safe area and the user exits the car after ending the reservation.
\begin{itemize}
	\item{[RE.7.1] The system must keep track until the end of the reservation of the amount the user has to pay.}
	\item{[RE.9.1] The moment a car is parked in a safe area, the system must ask through an interface on the car screen if the user wants to end the reservation or just park temporarily.}
	\item{[RE.9.2] If a reserved car has been parked in a safe area and the user has chosen to end the reservation, then after the user has closed the doors the system must carry out the transaction for the amount that the system calculated, with the method of payment specified by the user on registration.}
\end{itemize}
}

\item[{[G10]}]{Users must be able to leave a car in a safe area without losing the reservation by informing the system that they’re only temporarily parking; in this case the system keeps charging the user.
\begin{itemize}
	\item{[RE.7.1] The system must keep track until the end of the reservation of the amount the user has to pay.}
	\item{[RE.9.1] The moment a car is parked in a safe area, the system must ask through an interface on the car screen if the user wants to end the reservation or just park temporarily.}
	\item{[RE.10.1] When a car is temporarily parked and locked, the system keeps on charging the user but with different rules than those used in RE.7.3, this time depending only on time elapsed while parked.}
	\item{[RE.10.2] After a temporarily parked car is unlocked by the user and the engine is turned on, the system starts charging the user with the rules used in RE.7.3 again.}
\end{itemize}
}

\item[{[G11]}]{The system must lock the car automatically after the user exits the car.
\begin{itemize}
	\item{[RE.9.1] The moment a car is parked in a safe area, the system must ask through an interface on the car screen if the user wants to end the reservation or just park temporarily.}
	\item{[RE.11.1] After the user chose to end their reservation or park temporarily, the system must lock the car after 30 seconds from the moment the last door has been closed.}
\end{itemize}
}

\item[{[G12]}]{The system must provide a money saving option to the user, proposing a suitable power grid station near the user’s final destination. The user will get a discount if they park the car there and plug it in the power grid.
\begin{itemize}
	\item{[RE.12.1] The system must offer an interface where the user can select the money saving option and submit their final destination.}
	\item{[RE.12.2] When the user submits their final destination for the money saving option, the system must find a suitable power grid station near the ones close to the destination that have at least one free spot.}
	\item{[RE.12.3] The system must show on the car's navigator the location of the power grid station chosen for the money saving option and how to get there.}
	\item{[RE.12.4] The system must apply a discount on the amount the user has to pay if they selected the power saving option and they parked in the station the system chose for them.}
\end{itemize}
}

\item[{[G13]}]{The stations proposed by the system with the money saving option must be chosen in a way that ensures a uniform distribution of cars in the city.
\begin{itemize}
	\item{[RE.13.1] To choose a station in the process specified in RE.12.2, the system selects among all the stations with free spots within a certain distance of the user’s final destination (e.g. a 10-minutes walk) the one with the fewest available cars nearby.}
\end{itemize}
}

\item[{[G14]}]{The system must apply a discount of 10\% on the last ride if the user took at least two other passengers onto the car.
\begin{itemize}
	\item{[RE.7.1] The system must keep track until the end of the reservation of the amount the user has to pay.}
	\item{[RE.14.1] If the weight sensors in the car seats detect at least two passengers (excluding the driver) for at least half of the time the car has been driving, then the system must apply a discount of 10\% at the end of the reservation on the amount the user has to pay.}
\end{itemize}
}

\item[{[G15]}]{The system must apply a discount of 20\% on the last ride if the car is left with more than 50\% of remaining battery charge.
\begin{itemize}
	\item{[RE.7.1] The system must keep track until the end of the reservation of the amount the user has to pay.}
	\item{[RE.15.1] When the car has been parked in a safe area and the user has chosen to end the reservation, the system must apply a discount of 20\% on the amount the user has to pay if the car is left with more than 50\% remaining battery charge.}
\end{itemize}
}

\item[{[G16]}]{The system must apply a discount of 30\% on the last ride if the car is left at special parking areas where they can be recharged, and the user takes care of plugging the car into the power grid.
\begin{itemize}
	\item{[RE.7.1] The system must keep track until the end of the reservation of the amount the user has to pay.}
	\item{[RE.16.1] When the car has been parked in a power grid station, has been plugged in the power grid and the user has chosen to end the reservation, the system must apply a discount of 30\% on the amount the user has to pay.}
\end{itemize}
}

\item[{[G17]}]{The system must charge 30\% more if the car is left at more than 3 km from the nearest power grid station or with less than 20\% remaining battery charge.
\begin{itemize}
	\item{[RE.7.1] The system must keep track until the end of the reservation of the amount the user has to pay.}
	\item{[RE.17.1] When the user has ended the reservation, if the car is parked more than 3 km from the nearest power grid station or has less than 20\% remaining battery charge and is not plugged in the power grid, the system must increase the amount the user has to pay by 30\%.}
\end{itemize}
}

\item[{[G18]}]{Users with outstanding bills cannot have access to the cars and reservations until the bills are paid.
\begin{itemize}
	\item{[RE.18.1] If a transaction fails the user must be marked as suspended until the outstanding bill is paid.}
	\item{[RE.18.2] Suspended users must not be allowed to reserve cars.}
\end{itemize}
}

\item[{[G19]}]{Users with outstanding bills should have a way to pay them.
\begin{itemize}
	\item{[RE.19.1] Users must have an option on the application to pay their outstanding bills.}
	\item{[RE.19.2] When the user chooses to pay their outstanding bills, if the transaction succeeds they are no longer marked as suspended, otherwise the user is notified and they remain suspended.}
	\item{[RE.19.3] Users must have a way to change the method of payment saved on the system through a dedicated option on the application.}
\end{itemize}
}

\item[{[G20]}]{Available cars should actually be available to the user and in good conditions (i.e. not dirty, damaged, and/or with low battery)
\begin{itemize}
	\item{[RE.20.1] Users should have a way to report problems with a car they reserved (excessive dirtiness, damage, etc.) through the interface on the car's display.}
	\item{[RE.20.2] If a user reports a car for dirtiness or damage, the system will mark it as unavailable, end the user's reservation and notify an employee to solve the problem.}
	\item{[RE.20.3] If a car has less than 20\% battery charge at the end of a trip, the system will mark the car as unavailable and notify the employees in charge of recharging cars.}
	\item{[RE.20.4] If a car is unlocked by force or moves without any reservation, the system will consider it stolen and mark it as unavailable. The system notifies the people in charge of handling theft.}
	\item{[RE.20.5] If a car is repaired, cleaned or otherwise fixed, an employee will mark it as available through a dedicated interface.}
	\item{[RE.20.6] If a car flagged as unavailable because of low battery reaches 50\% of battery charge while charging, the system will mark it as available again.}
\end{itemize}
}

\end{description}

\newpage
\subsubsection{Use Cases}

We identified the following use cases for our software:
	\begin{itemize}
		\item{\textbf{[UC.1]} A guest registers to PowerEnJoy.}
		\item{\textbf{[UC.2]} A user logs in to the PowerEnJoy application.}
		\item{\textbf{[UC.3a]} A user searches for available cars near his position.}
		\item{\textbf{[UC.3b]} A user searches for available cars in a specific position.}
		\item{\textbf{[UC.4]} A user reserves a car.}
		\item{\textbf{[UC.5]} A user cancels a reservation for a car.}
		\item{\textbf{[UC.6a]} A user unlocks the car with the QR code printed on the car.}
		\item{\textbf{[UC.6b]} A user unlocks the car using his position.}
		\item{\textbf{[UC.7]} A user ends a ride.}
		\item{\textbf{[UC.8]} A user parks the car without ending the ride.}
		\item{\textbf{[UC.9]} A user ends a ride while the car is temporarily parked.}
		\item{\textbf{[UC.10]} The system suggests to the user a PGS to park the car at and save money.}
		\item{\textbf{[UC.11]} Payment}
		\item{\textbf{[UC.12]} A user pays a pending bill.}
		\item{\textbf{[UC.13]} A user reports a problem to the system.}
	\end{itemize}

\paragraph{}
Figure \ref{use_case_diagram} shows the relationships between use cases and involved actors.

	\begin{figure}
		\centering
		\makebox[\textwidth][c]{
			\def\svgwidth{500pt}

			\input{images/use_case_diag.pdf_tex}
		}
		\caption{Use Case Diagram}
		\label{use_case_diagram}
	\end{figure}
<<<<<<< HEAD
	\newpage	\paragraph{[UC.1] A guest registers to PowerEnJoy.}
=======
	\newpage

	\paragraph{[UC.1] A guest registers to PowerEnJoy.}
>>>>>>> 1a1f4964818aa72ee2008959edd0a53ead49ef42
	~\\
	\begin{tabularx}{\textwidth}{  l  X  }
		\hline
		Actor & Guest\\
		\hline
		Goal & [G1]\\
		\hline
		Preconditions & The guest is not already registered\\
		\hline
		Execution Flow & \begin{enumerate}
			\item{The guest is on the home page and clicks on the “register” button to start the registration process.}
			\item{The guest chooses between "Sign up with Google", "Sign up with Facebook" or inserting the data manually.}
			\item{In the case of manually inserting, the guest fills in at least all mandatory fields with the required information (first name, last name, username, email address, DOB).}
			\item{In the other cases, the guest connects to Google or Facebook and gives the system permission to take the data from there.}
			\item{The guest uploads a photo of his driving license or inserts the information manually.}
			\item{The guest inserts the number of the credit card and the corresponding CVV}.
			\item{The guest gives their consent to the processing of their personal data by checking a box.}
			\item{The guest clicks on the “confirm” button and submits the data.}
			\item{In the case the guest uploads a photo, the system uses an OCR application to extract the data.}
			\item{The system connects to the \textit{Motorizzazione}'s data center to prove the validity of the driving license.}
			\item{The system generates a password and sends it to the user's email address.}
			\item{The system  saves the data in the DB.}
			\item{The system informs the user of the successful registration and redirects the user to the profile management page.}
		\end{enumerate}\\
		\hline
	\end{tabularx}
	\begin{tabularx}{\textwidth}{  l  X  }
		\hline
		Postconditions & The guest successfully completes the registration process and become a user. From now on he or she can log in to the application using his credentials and use PowerEnJoy.\\
		\hline
		Exceptions & \begin{enumerate}
			\item{The guest is already registered.}
			\item{The guest inserts invalid information.}
			\item{The guest inserts a username used by another user.}
			\item{The guest inserts an email address used by another user.}
			\item{The guest doesn't give their consent to the processing of personal data.}
		\end{enumerate}
		Each exception is handled by warning the guest of the problem and letting them insert the data again.\\
		\hline
	\end{tabularx}

	\begin{figure}[H]
		\centering
		\makebox[\textwidth][c]{
			\def\svgwidth{450pt}
			\input{images/A_guest_registers_to_PowerEnJoy.pdf_tex}
		}
	\end{figure}

	\paragraph{[UC.2] A user logs in to the PowerEnJoy application.}
	~\\
	\begin{tabularx}{\textwidth}{  l  X  }
		\hline
		Actor & User\\
		\hline
		Goal & [G2]\\
		\hline
		Preconditions & The user must be registered in the system.\\
		\hline
		Execution Flow & \begin{enumerate}
			\item{The guest opens the PowerEnJoy application and presses on the login button.}
			\item{The guest inserts the username or email and password received during registration and submits them.}
			\item{The system checks the credentials submitted by the user.}
			\item{The user is authenticated and redirected to the page where he can look for a car.}
		\end{enumerate}\\
		\hline
		Postconditions & The user is now  logged in and can use all the functionalities of the system.\\
		\hline
		Exceptions & \begin{enumerate}
			\item{The guest submits invalid credentials.}
		\end{enumerate}\\
		\hline
	\end{tabularx}

	\begin{figure}[H]
		\centering
		\makebox[\textwidth][c]{
			\def\svgwidth{450pt}
			\input{images/A_user_logs_in_the_PowerEnjoy_application.pdf_tex}
		}
	\end{figure}

	\paragraph{[UC.3a] A user searches for available cars near his position.}
	~\\
	\begin{tabularx}{\textwidth}{  l  X  }
		\hline
		Actor & User\\
		\hline
		Goal & [G3a]\\
		\hline
		Preconditions & The user is logged in to the system and the GPS is active.\\
		\hline
		Execution Flow & \begin{enumerate}
			\item{The user presses the button to be localized on the map.}
			\item{The system receives the user's position and searches the DB for all the available cars close to that position.}
			\item{The application shows on a map all the cars that were found.}
			\item{The user navigates on the map to choose a car.}
			\item{The user selects a car he or her is interested in and sees its battery charge.}
		\end{enumerate}\\
		\hline
		Postconditions & The user can see all the available cars and their battery charge.\\
		\hline
		Exceptions & \begin{enumerate}
			\item{There aren't any available cars, in this case the system will suggest to search in a different location.}
		\end{enumerate}\\
		\hline
	\end{tabularx}

	\begin{figure}[H]
		\centering
		\makebox[\textwidth][c]{
			\def\svgwidth{450pt}
			\input{images/A_user_searches_an_available_car_near_his_position..pdf_tex}
		}
	\end{figure}

	\paragraph{[UC.3b] A user searches for available cars in a specific position.}
	~\\
	\begin{tabularx}{\textwidth}{  l  X  }
		\hline
		Actor & User\\
		\hline
		Goal & [G3b]\\
		\hline
		Preconditions & The user is logged in to the system\\
		\hline
		Execution Flow & \begin{enumerate}
			\item{The user presses the search bar to insert a location.}
			\item{The user inserts an address or a name of a place}
			\item{The system receives the user's input.}
			\item{The system interprets the address or place's name and converts it into a position.}
			\item{The system checks in the DB all the available cars close to that position.}
			\item{The application shows on a map all the cars that were found.}
			\item{The user navigates on the map to choose a car.}
			\item{The user selects a car he or her is interested in and sees its battery charge.}
		\end{enumerate}\\
		\hline
		Postconditions & The user can see all the available cars and their battery charge.\\
		\hline
		Exceptions & \begin{enumerate}
			\item{The address inserted by the user doesn't exist.}
			\item{There aren't any available cars, in this case the system will suggest to search in a different location.}
		\end{enumerate}\\
		\hline
	\end{tabularx}

	\begin{figure}[H]
		\centering
		\makebox[\textwidth][c]{
			\def\svgwidth{450pt}
			\input{images/A_user_searches_an_available_car_in_a_specific_position..pdf_tex}
		}
	\end{figure}

	\paragraph{[UC.4] A user reserves a car.}
	~\\
	\begin{tabularx}{\textwidth}{  l  X  }
		\hline
		Actor & User\\
		\hline
		Goal & [G4]\\
		\hline
		Preconditions & The user is logged in and there is at least an available car.\\
		\hline
		Execution Flow & \begin{enumerate}
			\item{The user selects a car on the map.}
			\item{The system shows to the user the battery remaining charge.}
			\item{The user confirms the selected car as their choice for reservation.}
		\end{enumerate}\\
		\hline
		Postconditions & The car is reserved for the user for an hour. \\
		\hline
		Exceptions & \begin{enumerate}
			\item{The car is reserved by an another user before the user confirms the reservation.}
			\item{The user is suspended by the system. In this case, the application doesn't let them reserve the car and reminds them that they have to pay the pending bill(s).}
		\end{enumerate}\\
		\hline
	\end{tabularx}

	\begin{figure}[H]
		\centering
		\makebox[\textwidth][c]{
			\def\svgwidth{450pt}
			\input{images/A_user_reserves_a_car..pdf_tex}
		}
	\end{figure}

	\paragraph{[UC.5] A user cancels a reservation for a car.}	~\\
	\begin{tabularx}{\textwidth}{  l  X  }
		\hline
		Actor & User\\
		\hline
		Goal & [G5]\\
		\hline
		Preconditions & The user is logged in, has reserved a car and hasn't unlocked the car yet.\\
		\hline
		Execution Flow & \begin{enumerate}
			\item{The user goes to the main page of the application.}
			\item{The user presses the "Cancel reservation" button.}
			\item{The user confirms that they want to cancel the reservation.}
			\item{The system marks the car as available again.}
		\end{enumerate}\\
		\hline
		Postconditions & The car is available and the user has no pending reservation. \\
		\hline
		Exceptions & \begin{enumerate}
			\item{The reservation has already expired. The system charges the user a fee of 1 EUR and cancels the reservation.}
		\end{enumerate}\\
		\hline
	\end{tabularx}

	\begin{figure}[H]
		\centering
		\makebox[\textwidth][c]{
			\def\svgwidth{450pt}
			\input{images/A_user_cancels_a_reservation_for_a_car..pdf_tex}
		}
	\end{figure}

	\paragraph{[UC.6a] A user unlocks the car with the QR code printed on the car.}	~\\
	\begin{tabularx}{\textwidth}{  l  X  }
		\hline
		Actor & User\\
		\hline
		Goal & [G6]\\
		\hline
		Preconditions & The user is logged in and close to the car he reserved.\\
		\hline
		Execution Flow & \begin{enumerate}
			\item{The user presses on the camera button, takes a picture of the QR code printed on the car and submits it to the system.}
			\item{The system identifies the car with the QR code and checks the reservation.}
			\item{The system enables the button to unlock the car on the application.}
			\item{The user presses the button.}
			\item{The system unlocks the car.}
		\end{enumerate}\\
		\hline
		Postconditions & The car unlocked and ready to be started.\\
		\hline
		Exceptions & \begin{enumerate}
			\item{The user sends a QR code of a car he didn't reserve.}
		\end{enumerate}\\
		\hline
	\end{tabularx}

	\begin{figure}[H]
		\centering
		\makebox[\textwidth][c]{
			\def\svgwidth{450pt}
			\input{images/A_user_unlocks_the_car_with_the_QR_code_printed_on_the_car..pdf_tex}
		}
	\end{figure}

	\paragraph{[UC.6b] A user unlocks the car using his position.}	~\\
	\begin{tabularx}{\textwidth}{  l  X  }
		\hline
		Actor & User\\
		\hline
		Goal & [G6]\\
		\hline
		Preconditions & The user is close to the car he reserved and has the localization activated.\\
		\hline
		Execution Flow & \begin{enumerate}
			\item{The user presses on the localization button and sends his position to the system.}
			\item{The system checks if the user's position is close to the car's.}
			\item{The system enables the button to unlock the car on the application.}
			\item{The user presses the button.}
			\item{The system unlocks the car.}
		\end{enumerate}\\
		\hline
		Postconditions & The car is unlocked and ready to started.\\
		\hline
		Exceptions & \begin{enumerate}
			\item{The user is too far from the car he reserved}
		\end{enumerate}\\
		\hline
	\end{tabularx}

	\begin{figure}[H]
		\centering
		\makebox[\textwidth][c]{
			\def\svgwidth{450pt}
			\input{images/A_user_unlocks_the_car_using_his_position..pdf_tex}
		}
	\end{figure}

	\paragraph{[UC.7] A user ends a ride.}	~\\
	\begin{tabularx}{\textwidth}{  l  X  }
		\hline
		Actor & User\\
		\hline
		Goal & [G9], [G15], [G16], [G17]\\
		\hline
		Preconditions & The user is using the car.\\
		\hline
		Execution Flow & \begin{enumerate}
			\item{If the user is driving he or her stops the car and turns the engine off.}
			\item{The system checks if the car's position corresponds to a safe area.}
			\item{The display shows to the user two options:
				\begin{description}
					\item[a)]{ to end the ride;}
					\item[b)]{ to park the car temporarily.}
				\end{description}}
				\item{The user presses the button a).}
				\item{The user exits the car and closes the doors.}
				\item{The system locks the car.}
				\item{The system stops charging the user.}
				\item{The system verifies if one or more discount can be applied and in that case applies them.}
				\item{The system sets the car as available.}
				\item{The system carries out the payment transaction.}
			\end{enumerate}\\
			\hline
			Postconditions & The car is stopped in a safe area, available and ready to be reserved again.\\
			\hline
			Exceptions & \begin{itemize}
				\item{The car is not parked in a safe area. In this case the system tells the user the closest safe areas to park in.}
				\item{The user drives away instead of exiting the car. In this case the process is canceled.}
			\end{itemize}\\
			\hline
		\end{tabularx}

		\begin{figure}[H]
			\centering
			\makebox[\textwidth][c]{
				\def\svgwidth{450pt}
				\input{images/A_user_ends_the_ride..pdf_tex}
			}
		\end{figure}

		\paragraph{[UC.8] A user parks the car without ending the ride.}	~\\
		\begin{tabularx}{\textwidth}{  l  X  }
			\hline
			Actor & User\\
			\hline
			Goal & [G10]\\
			\hline
			Preconditions & The user is using the car.\\
			\hline
			Execution Flow & \begin{enumerate}
				\item{If the user is driving he or she stops the car and turns the engine off.}
				\item{The system checks if the car's position corresponds to a safe area.}
				\item{The display shows to the user two options:
					\begin{description}
						\item[a)]{ to end the ride;}
						\item[b)]{ to park the car temporarily.}
					\end{description}}
					\item{The user presses the button b).}
					\item{The user exits the car and closes the doors.}
					\item{The system locks the car automatically.}
				\end{enumerate}\\
				\hline
				Postconditions & The car is stopped in a safe area, ready to be unlocked by the same user.\\
				\hline
				Exceptions & \begin{itemize}
					\item{The car is not parked in a safe area. In this case the system tells the user the closest safe areas to park in.}
					\item{The user drives away instead of exiting the car. In this case the stop is canceled.}
				\end{itemize}\\
				\hline
			\end{tabularx}

			\begin{figure}[H]
				\centering
				\makebox[\textwidth][c]{
					\def\svgwidth{450pt}
					\input{images/A_user_parks_the_car_without_ending_the_ride..pdf_tex}
				}
			\end{figure}

			\paragraph{[UC.9] A user ends a ride while the car is temporarily parked.}	~\\
			\begin{tabularx}{\textwidth}{  l  X  }
				\hline
				Actor & User\\
				\hline
				Goal & [G10], [G15], [G16], [G17]\\
				\hline
				Preconditions & The user is logged in, and the car is locked and temporarily parked.\\
				\hline
				Execution Flow & \begin{enumerate}
					\item{The user goes to the main page of the application.}
					\item{The user presses the "End ride" button.}
					\item{The system stops charging the user.}
					\item{The system verifies if one or more discount can be applied and in that case applies them.}
					\item{The system sets the car as available.}
					\item{The system carries out the payment transaction.}
				\end{enumerate}\\
				\hline
				Postconditions & The car is stopped in a safe area, ready to be used again.\\
				\hline
				Exceptions & -\\
				\hline
			\end{tabularx}

			\begin{figure}[H]
				\centering
				\makebox[\textwidth][c]{
					\def\svgwidth{450pt}
					\input{images/A_user_ends_a_ride_after_choose_to_park_the_car_temporally..pdf_tex}
				}
			\end{figure}

			\paragraph{[UC.10] The system suggests to the user a PGS to park the car at and save money.}	~\\
			\begin{tabularx}{\textwidth}{  l  X  }
				\hline
				Actor & System, User\\
				\hline
				Goal & [G12]\\
				\hline
				Preconditions & The user is using the car.\\
				\hline
				Execution Flow & \begin{enumerate}
					\item{The user inserts the destination on the car's navigator.}
					\item{The user chooses the option "Find charging station"}
					\item{The system calculates the best solution, so it searches the nearest PGS to the destination keeping in mind a uniform distribution of the cars.}
					\item{The system suggests the PGS to the user through the display.}
					\item{The user drives to the PGS, parks the car and turns the engine off.}
					\item{The user plugs the car in the power grid.}
					\item{The user chooses from the car's display to end the ride.}
					\item{The system detects that the car's position corresponds to the right PGS and that the car is plugged in.}
					\item{The system applies a discount on the amount the user has to pay.}
				\end{enumerate}\\
				\hline
				Postconditions & The car is ready to be locked.\\
				\hline
			\end{tabularx}
			\begin{tabularx}{\textwidth}{ l X }
				Exceptions & \begin{enumerate}
					\item{There isn't any available PGS near the user's destination.}
					\item{The user doesn't park the car at the PGS suggested by the system.}
					\item{The user doesn't plug the car in the power grid.}
					\item{The user drives away after choosing to end the ride. The discount is canceled.}
				\end{enumerate}\\
				\hline
			\end{tabularx}

			\begin{figure}[H]
				\centering
				\makebox[\textwidth][c]{
					\def\svgwidth{450pt}
					\input{images/The_system_suggests_to_the_user_a_PGS_to_park_the_car_and_save_money..pdf_tex}
				}
			\end{figure}

			\paragraph{[UC.11] Payment}	~\\
			\begin{tabularx}{\textwidth}{  l  X  }
				\hline
				Actor & System, Payment API\\
				\hline
				Goal & [G9], [G19]\\
				\hline
				Preconditions & The user ended a ride and has a pending charge.\\
				\hline
				Execution Flow & \begin{enumerate}
					\item{The system starts the transaction.}
					\item{The system sends its credentials to the Payment API.}
					\item{The system sends the user's account data to the API.}
					\item{The system sends the amount to receive to the API.}
					\item{The API confirms the payment.}
					\item{The system closes the transaction.}
				\end{enumerate}\\
				\hline
				Postconditions & The bill is paid\\
				\hline
				Exceptions & \begin{enumerate}
					\item{The Payment API is not available. In this case, the system marks the bill as "waiting" and retries later.}
					\item{The transaction is rejected. In this case, the system suspends the user until he pays the pending bill.}
				\end{enumerate}\\
				\hline
			\end{tabularx}

			\begin{figure}[H]
				\centering
				\makebox[\textwidth][c]{
					\def\svgwidth{450pt}
					\input{images/Payment..pdf_tex}
				}
			\end{figure}

			\paragraph{[UC.12] A user pays a pending bill.}	~\\
			\begin{tabularx}{\textwidth}{  l  X  }
				\hline
				Actor & User, System, Payment API\\
				\hline
				Goal & [G18]\\
				\hline
				Preconditions & The user is logged in, has a pending bill and is suspended.\\
				\hline
				Execution Flow & \begin{enumerate}
					\item{The user goes to his profile page.}
					\item{The user selects the pending bill.}
					\item{The user selects the payment method.}
					\item{The user confirms the transaction.}
					\item{The system carries out the payment as in the "Payment" use case.}
					\item{The API confirms the payment.}
					\item{The system cancels the suspension.}
				\end{enumerate}\\
				\hline
				Postconditions & The bill is paid and the user is no longer suspended.\\
				\hline
				Exceptions & \begin{enumerate}
					\item{The Payment API is not available. In this case, the system marks the bill as "waiting" and retries later.}
					\item{The transaction is rejected. In this case, the user is notified of the problem and remains suspended.}
				\end{enumerate}\\
				\hline
			\end{tabularx}

			\begin{figure}[H]
				\centering
				\makebox[\textwidth][c]{
					\def\svgwidth{450pt}
					\input{images/User_pays_a_pending_bill..pdf_tex}
				}
			\end{figure}

			\paragraph{[UC.13] A user reports a problem to the system.}	~\\
			\begin{tabularx}{\textwidth}{  l  X  }
				\hline
				Actor & User, System\\
				\hline
				Goal & [G20]\\
				\hline
				Preconditions & The user is logged in and has reserved a car\\
				\hline
				Execution Flow & \begin{enumerate}
					\item{The user goes to the reporting page of the application.}
					\item{The user selects the type of problem the car has (dirty, damaged, ...).}
					\item{The user confirms and submits the data to the system.}
					\item{The system checks the data inserted by the user.}
					\item{The system sets the car as unavailable.}
					\item{The system ends the user's reservation and ride.}
				\end{enumerate}\\
				\hline
				Postconditions & The car is marked as unavailable and the user has no reservation.\\
				\hline
				Exceptions & \begin{enumerate}
					\item{The user inserts wrong data.}
				\end{enumerate}\\
				\hline
			\end{tabularx}

			\begin{figure}[H]
				\centering
				\makebox[\textwidth][c]{
					\def\svgwidth{450pt}
					\input{images/A_user_informs_the_system_of_a_problem..pdf_tex}
				}
			\end{figure}
\newpage
\subsection{Performance Requirements}

\begin{itemize}

  \item{\textit{Response Time}: we want that our software will satisfy the 100\% of requests in maximum 0.5 seconds.
  For this reason, the software, in order to guarantee a good grade of usability, has to be very reactive
  and we assume that the user's perception is bounded to his connection and his device.}

  \item{\textit{Workload}: we assume that the workload will distributed following the profile below: <mettere immagine>\newline

  We assume that our software will be able to manage a large number of connection
  - we estimates the the peak load could be about 3000 connections - between users and the system.}
\end{itemize}

\subsubsection{Software System Attributes}

\begin{itemize}

  \item{\textit{User Friendliness}:
    The use interface has to be as simple and intuitive as possible because
    the application could also be used by users that could feel uncomfortable with the technology.}

  \item{\textit{Reliability}: we assume that our software will give the right result at the 99\% of the requests.}

  \item{\textit{Availability}: we assume that our software will be available with a rate of 99\%.
                               In order to ensure that rate, potential patches will deployed during the night.}

  \item{\textit{Security}:
    \begin{itemize}
      \item{each message exchanged between the system and the user will be protected by using TLS protocol.}
      \item{sensitive data as username, password, driving license ID and so on will be saved on the database and masquerade by using SHA-256 algorithm.}
\end{itemize}}
  \item{\textit{Maintainability}: our software will be followed by a complete JavaDoc so other developers should easily correct or improve the code
                                  or integrate new functions.}

  \item{\textit{Portability}: in the matter of server-side, we will implement our software in order to be executed on the most commercial server;
                              instead for the client-side the software will be compatible with iOS, Android and Windows Phone in regard of mobile application,
                              while the web app will be compatible with the most used browser as Chrome, Firefox, Opera, Safari, etc..}

\end{itemize}

\newpage{}

\section{Appendix}

\subsection{Alloy Model}
\lstinputlisting{PowerEnjoy_v3.als}
\subsection{Software and tools used}

\subsection{Hours of work}

\newpage{}

\section{Revisions}

\subsection{Changelog}
\end{document}
